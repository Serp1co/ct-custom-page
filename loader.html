<script type="text/javascript">
    /* thi should be inside the async func, before everything */
    let loader_interval = setInterval(() => document.querySelector("load-await").innerHTML += " . ", 100);
    /* this is just for impl, but the onload is slow on the actual site. If resources are cached (around 10min or something?) the fetches are very fast as the request is very small, here this gets shown a little*/
    window.onload = async function () {
        let env = 'remote';
        const minigame_stylesheet_url = {
            'remote': 'https://raw.githubusercontent.com/Serp1co/ct-custom-page/main/section.css',
            'local': 'http://localhost:8080/static/section.css'
        };
        const minigame_script_url = {
            'remote': 'https://raw.githubusercontent.com/Serp1co/ct-custom-page/main/section.js',
            'local': 'http://localhost:8080/static/section.js'
        };
        const minigame_html_url = {
            'remote': 'https://raw.githubusercontent.com/Serp1co/ct-custom-page/main/section.html',
            'local': 'http://localhost:8080/static/section.html'
        };
        const process_response = function (response) {
            if (response.ok) return response.text();
            else throw { "status_code: ": response.status, "status_description": response.statusText };
        }
        await fetch(minigame_stylesheet_url[env])
            .then(response => process_response(response))
            .then(data => {
                let style = document.createElement("style");
                style.innerHTML = data;
                document.querySelector("custom-styles").appendChild(style);
            })
            .then(() => {
                fetch(minigame_script_url[env])
                    .then(response => process_response(response))
                    .then(data => {
                        let script = document.createElement("script");
                        script.innerHTML = data;
                        document.querySelector("custom-scripts").appendChild(script);
                    })
                    .then(() => {
                        fetch(minigame_html_url[env])
                            .then(response => process_response(response))
                            .then(data => { document.querySelector("custom-section").innerHTML += data })
                            .catch(exception => console.log("couldn't fetch html data. " + JSON.stringify(exception)))
                    })
                    .catch(exception => console.log("couldn't fetch js data. " + JSON.stringify(exception)))
            })
            .catch(exception => console.log("couldn't fetch css data. " + JSON.stringify(exception)))
            .finally(() => {
                clearInterval(loader_interval);
                document.querySelector("load-await").remove();
            })
            ;
    }
</script>
<load-await>
    Loading.
</load-await>
<custom-styles>
</custom-styles>
<custom-section>
</custom-section>
<custom-scripts>
</custom-scripts>