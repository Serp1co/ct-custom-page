<!-- START CUSTOM -->
<custom-section>
    <style>
        div.body_box {
            border: 0px;
        }

        .glitch {
            font-size: 2rem;
            position: absolute;
            text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff,
                0.025em 0.04em 0 #fffc00;
            animation: glitch 725ms infinite;
        }

        .glitch span {
            position: absolute;
        }

        .glitch span:first-child {
            animation: glitch 500ms infinite;
            clip-path: polygon(0 0, 100% 0, 100% 35%, 0 35%);
            transform: translate(-0.04em, -0.03em);
            opacity: 0.75;
        }

        .glitch span:last-child {
            animation: glitch 375ms infinite;
            clip-path: polygon(0 65%, 100% 65%, 100% 100%, 0 100%);
            transform: translate(0.04em, 0.03em);
            opacity: 0.75;
        }

        @keyframes glitch {
            0% {
                text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff,
                    0.025em 0.04em 0 #fffc00;
            }

            15% {
                text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff,
                    0.025em 0.04em 0 #fffc00;
            }

            16% {
                text-shadow: -0.05em -0.025em 0 #00fffc, 0.025em 0.035em 0 #fc00ff,
                    -0.05em -0.05em 0 #fffc00;
            }

            49% {
                text-shadow: -0.05em -0.025em 0 #00fffc, 0.025em 0.035em 0 #fc00ff,
                    -0.05em -0.05em 0 #fffc00;
            }

            50% {
                text-shadow: 0.05em 0.035em 0 #00fffc, 0.03em 0 0 #fc00ff,
                    0 -0.04em 0 #fffc00;
            }

            99% {
                text-shadow: 0.05em 0.035em 0 #00fffc, 0.03em 0 0 #fc00ff,
                    0 -0.04em 0 #fffc00;
            }

            100% {
                text-shadow: -0.05em 0 0 #00fffc, -0.025em -0.04em 0 #fc00ff,
                    -0.04em -0.025em 0 #fffc00;
            }
        }

        .overlay {
            position: absolute;
            height: 0%;
            width: 0%;
        }

        div.my_section {
            border: 1px whitesmoke dashed;
            height: 650px;
            padding-top: 5px;
            padding-bottom: 5px;
        }

        div#terminal_output {
            align-content: center;
            vertical-align: center;
        }

        div.sector {
            display: flex;
            justify-content: left;
            align-content: left;
            flex-direction: column;
            text-align: left;
            padding-left: 10px;
        }

        .visible {
            opacity: 100%;
            visibility: visible;
            height: 600px;
            transition: opacity 1s ease-in;
        }

        .hidden {
            visibility: hidden;
            opacity: 0%;
            transition: opacity 0s ease-in;
            height: 0px;
            width: 0px;
        }

        .sector_img {
            align-self: center;
        }

        p.terminal_text {
            font-size: 12px;
            margin-top: 2px;
            margin-bottom: 0px;
        }

        input.terminal_input {
            background-color: transparent;
            border: 0px;
            border-radius: 0px;
            width: 70%;
            color: white;
            transition: none;
        }

        input.terminal_input:hover {
            background-color: transparent;
            border: 0px;
            border-radius: 0px;
            width: 70%;
            color: white;
            transition: none;
        }

        input.terminal_input:focus {
            background-color: transparent;
            border: 0px;
            border-radius: 0px;
            width: 70%;
            color: white;
            transition: none;
        }

        input.terminal_input:active {
            background-color: transparent;
            border: 0px;
            border-radius: 0px;
            width: 70%;
            color: white;
            transition: none;
        }

        button.terminal_button {
            background-color: transparent;
            color: white;
            border: 0px;
        }

        .hint:hover {
            color: white;
        }

        .tip {
            animation: glitch 375ms infinite;
        }

        .tip:hover {
            color: greenyellow;
            background-color: black;
        }

        .hint-easy {
            animation: hint 1000ms infinite step-end;
        }

        @keyframes hint {

            0%,
            100% {
                background-color: transparent;
                color: white;
            }

            50% {
                color: black;
                background-color: white;
            }
        }
    </style>
    <script>
        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min) + min);
        }
        function glitched_hint_html_fn(letter, offset_x, offset_y) {
            var template = '<p class="glitch" style="top:%s1px;left:%s2px"><span aria-hidden="true">%s0</span>%s0<span aria-hidden="true">%s0</span></p>';
            template = template.replaceAll('%s0', letter);
            template = template.replaceAll('%s1', offset_y);
            template = template.replaceAll('%s2', offset_x);
            return template;
        }
        function switch_visibility(domElement) {
            domElement.classList.toggle('visible');
            domElement.classList.toggle('hidden');
        }
        function clean_all_visible(arg = "") {
            document.querySelectorAll(arg.concat(".visible")).forEach((x) => switch_visibility(x));
        }
        function select_section(section_name) {
            const s_section_id = '#' + section_name + '_sector';
            const domElement = document.querySelector(s_section_id);
            switch_visibility(domElement);
        }
        function create_tip(text, index) {
            var template = '<a onclick="load_tip('.concat("%index)").concat('" class="tip').concat(easy_mode_on ? '' : '').concat('">%text</a> ');
            template = template.replaceAll('%text', text);
            template = template.replaceAll('%index', index);
            return template;
        }
        function create_hint(text, hint = text) {
            var template = '<a onclick="load_hint('.concat("'%hint')").concat('" class="hint').concat(easy_mode_on ? ' hint-easy' : '').concat('">%text</a> ');
            template = template.replaceAll('%text', text);
            template = template.replaceAll('%hint', hint);
            return template;
        }
        function load_hint(hint) {
            if (easy_mode_on) {
                document.querySelector('#terminal_input').value = hint;
            }
        }
        function print_diary_string(text) {
            var line_template = '<p class="terminal_text">%text</a></p>';
            line_template = line_template.replaceAll('%path', path);
            line_template = line_template.replaceAll('%text', text);
            document.querySelector("#terminal_output").innerHTML += line_template;
        }

        function print_terminal_string(text) {
            var line_template = '<p class="terminal_text">[root@localhost %path]# %text</a></p>';
            line_template = line_template.replaceAll('%path', path);
            line_template = line_template.replaceAll('%text', text);
            document.querySelector("#terminal_output").innerHTML += line_template;
        }
        const diary_sections = ['mother', 'cancer', 'tokyo', 'DONT'];
        const minigame_commands = {
            'systemctl': start,
            '--help': help,
            'ls': view,
            'less': read,
            'cd': move
        }
        const fake_fs_arr = ['~', '/root', '/root/opt', '/root/reserved', '/root/reserved/personal.diary'];
        var easy_mode_on = false;
        var path = '~';
        function play() {
            var full_cmd = document.querySelector("#terminal_input").value;
            document.querySelector('.overlay').innerHTML = "";
            print_terminal_string(full_cmd);
            full_cmd = full_cmd.split(' ');
            const command = full_cmd[0];
            const args = full_cmd.slice(1, full_cmd.length + 1).join(' ');
            if (minigame_commands[command]) minigame_commands[command](args);
            else change(command)
        }
        function start(arg) {
            not_found = false;
            if (arg == "enable --now cockpit.socket") {
                print_terminal_string("Connecting to socket...");
                print_terminal_string("Logged in as root. Access audit registered.");
                print_terminal_string("Type ".concat(create_hint('--help')).concat("to view the list of commands"));
            } else {
                print_terminal_string("Not allowed");
            }
        }
        function help() {
            print_terminal_string("ls -fs => to view all file system contents");
            print_terminal_string("cd path => to move inside the file system");
            print_terminal_string(create_hint("less path/to/file", "less /root/reserved/personal.diary").concat(" => read a file"));
        }
        function view(arg) {
            if (arg == '-fs') {
                print_terminal_string("view file system...");
                fake_fs_arr.forEach((e, i) => print_diary_string(e));
            } else {
                print_terminal_string("Not allowed");
            }
        }
        function move(arg) {
            if (fake_fs_arr.indexOf(arg) != -1) {
                path = arg;
                print_terminal_string("");
            } else {
                print_terminal_string("Not allowed");
            }
        }
        function read(arg) {
            if (arg == "/root/reserved/personal.diary") {
                print_terminal_string("Accessing file: personal.diary");
                print_diary_string("A normal life.");
                const hint_text = 'A normal '.concat(create_tip("family", 0));
                print_diary_string(hint_text);
            }
        }
        function change(arg) {
            clean_all_visible(".sector");
            const section = select_section(arg);
        }
        function load_tip(arg) {
            console.log(diary_sections)
            const tip = [...diary_sections[arg]];
            var tip_html = '';
            tip.forEach((l, i) => {
                if (!easy_mode_on) {
                    offset_x = i * getRandomInt(10, 640 / (i + 1));
                    offset_y = getRandomInt(10, 490);
                } else {
                    offset_x = 175 + (i * 50);
                    offset_y = 220;
                }
                tip_html += glitched_hint_html_fn(l, offset_x, offset_y);
            })
            document.querySelector('.overlay').innerHTML = tip_html;
            if (easy_mode_on) {
                document.querySelector('#terminal_input').value = tip.join('');
            }
        }
        function easy_mode() {
            easy_mode_on = !easy_mode_on;
            document.querySelectorAll('.hint').forEach(x => x.classList.toggle('hint-easy'));
        }
    </script>
    <div class="my_section" id="my_section">
        <div class="overlay" id="overlay">

        </div>
        <div class="sector visible" id="terminal_output">
            <p class="terminal_text">Using username "root".</p>
            <p class="terminal_text">Activate the web console with: <a class="hint"
                    onclick="load_hint('systemctl enable --now cockpit.socket')">
                    systemctl enable --now cockpit.socket</a></p>
            <p class="terminal_text"></p>
        </div>
        <div class="sector hidden" id="mother_sector">
            <p>So there's nothing left to do?</p>
            <img src="https://64.media.tumblr.com/1bac38ff365399e5afc8fd661e8d858a/13708b37496920de-84/s500x750/ac368619622a4a5db93fa7f01c4255ea94a5d7fd.gifv"
                class="sector_img mother_sector_img" height="400" width="400" />
            <p><a onclick="load_tip(1)" class="tip">...fuck...</a></p>
        </div>
        <div class="sector hidden" id="cancer_sector">
            <p>I think i need some <a onclick="load_tip(2)" class="tip">fresh air</a>.</p>
        </div>
        <div class="sector hidden" id="tokyo_sector">
            <p>Having <a onclick="load_tip(3)" class="tip">f u n</a>
                being a nobody
                </a>?</p>
            <div>
                <ul>
                    <li>
                        Name: Ash
                    </li>
                    <li>
                        Surname: Williams
                    </li>
                    <li>
                        Born in: London, England
                    </li>
                    <li>
                        Height: 1.78m
                    </li>
                    <li>
                        Weight: 70kg
                    </li>
                    <li>
                        Eyes: Green
                    </li>
                    <li>
                        Hairs: Brown
                    </li>
                </ul>
            </div>
        </div>
        <div class="sector hidden" id="DONT_sector">
            <img src="https://i.ibb.co/6vfttn3/screenshot.png" class="sector_img DONT_sector_img" />
            <div style="text-align:center">
                <ul>
                    <li>
                        Social Networks are <a class="tip">drugs</a>.
                    </li>
                    <li>
                        The State is a <a class="tip">lie</a>.
                    </li>
                    <li>
                        Privacy is <a class="tip">non-existant</a>.
                    </li>
                    <li>
                        Disinformation runs <a class="tip">rampant</a>.
                    </li>
                    <li>
                        Mind is <a class="tip">power</a>.
                    </li>
                    <li>
                        Money is <a class="tip">truth</a>.
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="terminal" id="terminal_input_div">
        <p class="terminal_text">[root@localhost ~]# <input type="text" id="terminal_input"
                class="terminal_input" /><button class="terminal_button" onclick="play()">></button>
        </p>
    </div>
    <div class="server_footer" id="server_footer_div">
        <div>
            <p>This server is property of Ash Williams, any connection and access will be reported, all
                actions are under strict auditing.</p>
            <p>malicious actions <a class="tip">w i l l</a> be persecuted.</p>
        </div>
        <br />
        <br />
        <hr />
        <br />
        <div class="" style="font-size:13px">
            (Apache 2.0 Open source license, feel free to use, pls report any bugs -> available under github@serp1co/ct-custom-page)<br />
            Per la soluzione potete guardare il codice sorgente o cercare gli hint, have fun.<br />
            <a class="hint" onclick="easy_mode()">Start/Stop Easy mode - click here</a>
        </div>
    </div>
</custom-section>
<!-- END CUSTOM -->
